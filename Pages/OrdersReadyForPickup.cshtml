@page
@model SpeedPassApp.Pages.IndexModel
@{
    ViewData["Title"] = "Orders Ready for Pickup";
}

<head>
    <meta charset="utf-8"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    <script>
        // JavaScript to handle remove button click event
        $(document).ready(function () {
            $(".remove-button").on("click", function () {
                var orderId = $(this).data("order-id");

                // Make an AJAX request to remove the order
                $.ajax({
                    url: "/OrdersReadyForPickup?handler=RemoveOrder",
                    type: "POST",
                    data: { orderId: orderId },
                    success: function () {
                        // Reload the page after successful removal
                        location.reload();
                    },
                    error: function (error) {
                        console.error(error);
                    }
                });
            });
        });
    </script>
        // Function to reload the page
        function reloadPage() {
            location.reload(true); // Reloads the page from the server
        }

        // Set interval to reload the page every 30 seconds (30000 milliseconds)
        setInterval(reloadPage, 30000);
    </script>
</head>
<h1>Orders Ready for Pickup</h1>

@foreach (var order in Model.Orders) {
<table>
    <thead>
        <tr>
            <td>@order.Order_Number</td>
            <td>@order.Fulfilled_Status</td>
            <td><button class="remove-button" data-order-id="@order.Order_Number">Remove</button></td>
            <!-- Add more columns as needed -->
        </tr>
    </thead>
</table>
}